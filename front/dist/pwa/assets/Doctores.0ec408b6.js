import{_ as V,O as r,P as g,Q as a,T as l,R as t,S as c,X as h,Y as q,Z as k,W as C,aG as _,aH as b,U as d,J as m,bl as N,aF as u,aI as w,$ as y,V as v}from"./index.e95d0bc0.js";import{a as x,b as p}from"./QMenu.8609dc78.js";import{Q as E}from"./QList.fb4676dd.js";import{Q as P}from"./QBtnDropdown.163614c2.js";import{Q as G}from"./QMarkupTable.20d7cf76.js";import{Q as L}from"./QSpace.33faaae9.js";import{Q as B}from"./QForm.4eae9afb.js";import{Q as S}from"./QPage.a74b1eb7.js";import{C as f}from"./ClosePopup.f858d8b6.js";import"./QBtnGroup.3d88f52a.js";const U={name:"DoctoresPage",data(){return{doctores:[],doctor:{},doctorDialog:!1,actionLabel:"Nuevo",loading:!1}},mounted(){this.doctoresGet()},methods:{doctoresGet(){this.loading=!0,this.$axios.get("doctores").then(i=>{this.doctores=i.data}).catch(i=>this.$q.notify({type:"negative",message:i.message})).finally(()=>{this.loading=!1})},doctorNew(){this.doctor={nombre:"",especialidad:"",telefono:"",email:""},this.actionLabel="Nuevo",this.doctorDialog=!0},doctorEdit(i){this.doctor={...i},this.actionLabel="Editar",this.doctorDialog=!0},doctorPost(){this.loading=!0,this.$axios.post("doctores",this.doctor).then(()=>{this.$q.notify({type:"positive",message:"Doctor creado con \xE9xito"}),this.doctoresGet(),this.doctorDialog=!1}).catch(i=>this.$q.notify({type:"negative",message:i.message}))},doctorPut(){this.loading=!0,this.$axios.put(`doctores/${this.doctor.id}`,this.doctor).then(()=>{this.$q.notify({type:"positive",message:"Doctor actualizado"}),this.doctoresGet(),this.doctorDialog=!1}).catch(i=>this.$q.notify({type:"negative",message:i.message}))},doctorDelete(i){this.$q.dialog({title:"Confirmar",message:"\xBFEliminar este doctor?",cancel:!0,persistent:!0}).onOk(()=>{this.$axios.delete(`doctores/${i}`).then(()=>{this.$q.notify({type:"positive",message:"Doctor eliminado"}),this.doctoresGet()}).catch(e=>this.$q.notify({type:"negative",message:e.message}))})}}},I={class:"row justify-between items-center q-mb-md"},T={class:"text-center"},F={class:"text-center"},O={key:0},z={class:"text-h6"},M={class:"text-right q-mt-md"};function j(i,e,A,H,s,n){return r(),g(S,{class:"q-pa-md"},{default:a(()=>[l("div",I,[e[6]||(e[6]=l("div",{class:"text-h6"},"Lista de Doctores",-1)),t(c,{color:"primary",icon:"add_circle",label:"Nuevo Doctor","no-caps":"",onClick:n.doctorNew,loading:s.loading},null,8,["onClick","loading"])]),t(G,{flat:"",bordered:"","wrap-cells":"",dense:""},{default:a(()=>[e[10]||(e[10]=l("thead",null,[l("tr",null,[l("th",{class:"text-center"},"#"),l("th",{class:"text-center"},"Acciones"),l("th",null,"Nombre"),l("th",null,"Especialidad"),l("th",null,"Tel\xE9fono"),l("th",null,"Email")])],-1)),l("tbody",null,[(r(!0),h(k,null,q(s.doctores,(o,D)=>(r(),h("tr",{key:o.id},[l("td",T,d(D+1),1),l("td",F,[t(P,{dense:"",color:"primary",label:"Opciones","no-caps":"",size:"10px"},{default:a(()=>[t(E,null,{default:a(()=>[m((r(),g(x,{clickable:"",onClick:Q=>n.doctorEdit(o)},{default:a(()=>[t(p,{avatar:""},{default:a(()=>[t(y,{name:"edit"})]),_:1}),t(p,null,{default:a(()=>e[7]||(e[7]=[v("Editar")])),_:1})]),_:2},1032,["onClick"])),[[f]]),m((r(),g(x,{clickable:"",onClick:Q=>n.doctorDelete(o.id)},{default:a(()=>[t(p,{avatar:""},{default:a(()=>[t(y,{name:"delete"})]),_:1}),t(p,null,{default:a(()=>e[8]||(e[8]=[v("Eliminar")])),_:1})]),_:2},1032,["onClick"])),[[f]])]),_:2},1024)]),_:2},1024)]),l("td",null,d(o.nombre),1),l("td",null,d(o.especialidad),1),l("td",null,d(o.telefono),1),l("td",null,d(o.email),1)]))),128)),s.doctores.length?C("",!0):(r(),h("tr",O,e[9]||(e[9]=[l("td",{colspan:"6",class:"text-center text-grey"},"No hay doctores registrados",-1)])))])]),_:1}),t(w,{modelValue:s.doctorDialog,"onUpdate:modelValue":e[5]||(e[5]=o=>s.doctorDialog=o),persistent:""},{default:a(()=>[t(_,{style:{"min-width":"400px"}},{default:a(()=>[t(b,{class:"row items-center q-pb-none"},{default:a(()=>[l("div",z,d(s.actionLabel)+" Doctor",1),t(L),m(t(c,{icon:"close",flat:"",round:"",dense:""},null,512),[[f]])]),_:1}),t(b,null,{default:a(()=>[t(B,{onSubmit:e[4]||(e[4]=N(o=>s.doctor.id?n.doctorPut():n.doctorPost(),["prevent"]))},{default:a(()=>[t(u,{modelValue:s.doctor.nombre,"onUpdate:modelValue":e[0]||(e[0]=o=>s.doctor.nombre=o),label:"Nombre",dense:"",outlined:"",rules:[o=>!!o||"Campo requerido"],class:"q-mb-sm"},null,8,["modelValue","rules"]),t(u,{modelValue:s.doctor.especialidad,"onUpdate:modelValue":e[1]||(e[1]=o=>s.doctor.especialidad=o),label:"Especialidad",dense:"",outlined:"",class:"q-mb-sm"},null,8,["modelValue"]),t(u,{modelValue:s.doctor.telefono,"onUpdate:modelValue":e[2]||(e[2]=o=>s.doctor.telefono=o),label:"Tel\xE9fono",dense:"",outlined:"",mask:"###############",class:"q-mb-sm"},null,8,["modelValue"]),t(u,{modelValue:s.doctor.email,"onUpdate:modelValue":e[3]||(e[3]=o=>s.doctor.email=o),label:"Email",type:"email",dense:"",outlined:""},null,8,["modelValue"]),l("div",M,[m(t(c,{flat:"",label:"Cancelar",color:"negative",loading:s.loading},null,8,["loading"]),[[f]]),t(c,{label:"Guardar",color:"primary",type:"submit",class:"q-ml-sm",loading:s.loading},null,8,["loading"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var oe=V(U,[["render",j]]);export{oe as default};
