import{_ as g,O as c,P as V,Q as d,R as l,aH as b,T as e,U as n,aF as Q,aJ as x,S as C,X as m,Y as k,Z as y,aG as P,V as h}from"./index.8cfd3fd6.js";import{Q as f}from"./QBadge.71341a78.js";import{Q as q}from"./QMarkupTable.eee695c5.js";import{Q as B}from"./QPage.9d9eacf3.js";import{h as p}from"./moment.40bc58bf.js";const D={name:"ProductosPorVencer",data(){return{valor:1,unidad:"meses",dias:1,productos:[],loading:!1}},mounted(){this.consultar()},methods:{consultar(){this.dias=this.convertirADias(this.valor,this.unidad),this.loading=!0,this.$axios.get("/productosPorVencer",{params:{dias:this.dias}}).then(t=>{this.productos=t.data}).catch(()=>{this.$alert.error("Error al consultar productos por vencer")}).finally(()=>{this.loading=!1})},convertirADias(t,a){switch(a){case"semanas":return t*7;case"meses":return t*30;case"anios":return t*365;default:return t}},diasRestantesColor(t){const a=p(),r=p(t).diff(a,"days"),o=Math.ceil(this.dias/3);return r<=o?{color:"red",dias:r}:r<=o*2?{color:"orange",dias:r}:{color:"green",dias:r}}}},R={class:"text-h6"},A={class:"row items-end q-col-gutter-md"},M={class:"col-12 col-md-2"},S={class:"col-12 col-md-6"},w={class:"col-12 col-md-2"};function E(t,a,_,r,o,i){return c(),V(B,{class:"q-pa-xs"},{default:d(()=>[l(P,{flat:"",bordered:""},{default:d(()=>[l(b,{class:"q-pa-xs"},{default:d(()=>[e("div",R,"Productos por vencer en "+n(o.dias)+" d\xEDas",1),e("div",A,[e("div",M,[l(Q,{modelValue:o.valor,"onUpdate:modelValue":a[0]||(a[0]=s=>o.valor=s),modelModifiers:{number:!0},type:"number",min:"1",label:"Cantidad",dense:"",outlined:""},null,8,["modelValue"])]),e("div",S,[l(x,{modelValue:o.unidad,"onUpdate:modelValue":a[1]||(a[1]=s=>o.unidad=s),options:[{label:"D\xEDas",value:"dias"},{label:"Semanas",value:"semanas"},{label:"Meses",value:"meses"},{label:"A\xF1os",value:"anios"}],type:"radio",inline:"",dense:""},null,8,["modelValue"])]),e("div",w,[l(C,{label:"Consultar",color:"green",icon:"search",class:"q-mt-sm",onClick:i.consultar,loading:o.loading,"no-caps":""},null,8,["onClick","loading"])])]),l(q,{dense:"",class:"q-mt-md",flat:"",bordered:""},{default:d(()=>[a[2]||(a[2]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Producto"),e("th",null,"Cantidad"),e("th",null,"Lote"),e("th",null,"Fecha de Vencimiento"),e("th",null,"Estado"),e("th",null,"D\xEDas restantes")])],-1)),e("tbody",null,[(c(!0),m(y,null,k(o.productos,(s,v)=>{var u;return c(),m("tr",{key:s.id},[e("td",null,n(v+1),1),e("td",null,n((u=s.producto)==null?void 0:u.nombre),1),e("td",null,n(s.cantidad),1),e("td",null,n(s.lote),1),e("td",null,n(s.fecha_vencimiento),1),e("td",null,[l(f,{color:s.estado==="Activo"?"green":"red",class:"q-pa-xs"},{default:d(()=>[h(n(s.estado),1)]),_:2},1032,["color"])]),e("td",null,[l(f,{color:i.diasRestantesColor(s.fecha_vencimiento).color,class:"q-pa-xs"},{default:d(()=>[h(n(i.diasRestantesColor(s.fecha_vencimiento).dias)+" d\xEDas ",1)]),_:2},1032,["color"])])])}),128))])]),_:1})]),_:1})]),_:1})]),_:1})}var L=g(D,[["render",E]]);export{L as default};
