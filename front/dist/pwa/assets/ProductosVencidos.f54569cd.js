import{_ as x,B as c,C as V,E as n,F as l,aG as v,G as a,Q,L as m,M as P,O as k,aF as b,H as s,J as p}from"./index.3f1820d1.js";import{Q as y}from"./QPagination.bd714fb6.js";import{Q as h}from"./QBadge.e07d3f2e.js";import{Q as B}from"./QMarkupTable.7e1afc93.js";import{Q as C}from"./QPage.a3dafa59.js";import{h as g}from"./moment.40bc58bf.js";import"./format.2cae61da.js";const q={name:"ProductosVencidos",data(){return{productos:[],loading:!1,pagina:1,porPagina:10,total:0}},mounted(){this.consultar()},methods:{consultar(){this.loading=!0,this.$axios.get("/productosVencidos",{params:{page:this.pagina,per_page:this.porPagina}}).then(r=>{this.productos=r.data.data,this.total=r.data.total}).catch(()=>{this.$alert.error("Error al consultar productos vencidos")}).finally(()=>{this.loading=!1})},diasVencido(r){const o=g(r),d=g().diff(o,"days");return d<0?0:d}}},E={class:"row q-col-gutter-sm"},F={class:"col-6"},L={class:"col-6 text-right"};function M(r,o,f,d,e,i){return c(),V(C,{class:"q-pa-xs"},{default:n(()=>[l(b,{flat:"",bordered:""},{default:n(()=>[l(v,{class:"q-pa-xs"},{default:n(()=>[o[2]||(o[2]=a("div",{class:"text-h6"},"Productos Vencidos",-1)),a("div",E,[a("div",F,[l(Q,{label:"Actualizar",color:"red",icon:"refresh",onClick:i.consultar,loading:e.loading,"no-caps":""},null,8,["onClick","loading"])]),a("div",L,[l(y,{modelValue:e.pagina,"onUpdate:modelValue":[o[0]||(o[0]=t=>e.pagina=t),i.consultar],max:Math.ceil(e.total/e.porPagina),"max-pages":"6",size:"sm","boundary-numbers":"","direction-links":"",color:"red"},null,8,["modelValue","max","onUpdate:modelValue"])])]),l(B,{dense:"",class:"q-mt-md",flat:"",bordered:""},{default:n(()=>[o[1]||(o[1]=a("thead",null,[a("tr",null,[a("th",null,"#"),a("th",null,"Producto"),a("th",null,"Cantidad"),a("th",null,"Lote"),a("th",null,"Fecha de Vencimiento"),a("th",null,"Estado"),a("th",null,"D\xEDas vencido")])],-1)),a("tbody",null,[(c(!0),m(k,null,P(e.productos,(t,_)=>{var u;return c(),m("tr",{key:t.id},[a("td",null,s((e.pagina-1)*e.porPagina+_+1),1),a("td",null,s((u=t.producto)==null?void 0:u.nombre),1),a("td",null,s(t.cantidad),1),a("td",null,s(t.lote),1),a("td",null,s(t.fecha_vencimiento),1),a("td",null,[l(h,{color:t.estado==="Activo"?"green":"red",class:"q-pa-xs"},{default:n(()=>[p(s(t.estado),1)]),_:2},1032,["color"])]),a("td",null,[l(h,{color:"negative",class:"q-pa-xs"},{default:n(()=>[p(s(i.diasVencido(t.fecha_vencimiento))+" d\xEDas ",1)]),_:2},1024)])])}),128))])]),_:1})]),_:1})]),_:1})]),_:1})}var T=x(q,[["render",M]]);export{T as default};
