import{_ as x,B as d,C as p,E as o,F as l,G as s,aE as r,I as f,Q as c,x as g,J as h,aF as v,aG as b,H as k,R as P,aH as D}from"./index.b06572a0.js";import{Q as y}from"./QPagination.fe3ca408.js";import{a as V,b as u,c as Q}from"./QMenu.c1e63efd.js";import{Q as G}from"./QList.fb2aa972.js";import{Q as U}from"./QBtnDropdown.af88a833.js";import{Q as _,a as E}from"./QTable.1fff7f3f.js";import{Q as N}from"./QChip.cff6d88d.js";import{Q as I}from"./QSpace.d75b8165.js";import{Q as q}from"./QSelect.22ca404a.js";import{Q as B}from"./QForm.e993d99a.js";import{Q as S}from"./QPage.a459216a.js";import{C as w}from"./ClosePopup.160a1389.js";import"./moment.40bc58bf.js";import"./format.2cae61da.js";import"./selection.4897e411.js";import"./QBtnGroup.2aca49b6.js";import"./QMarkupTable.8b056a53.js";const T={name:"ProductosPage",data(){return{pacientes:[],paciente:{},pacienteDialog:!1,loading:!1,filter:"",current_page:1,total:0,per_page:10,columns:[{name:"nombre_completo",label:"Nombre",align:"left",field:"nombre_completo"},{name:"tipo_paciente",label:"Tipo paciente",align:"left",field:"tipo_paciente"},{name:"identificacion",label:"Identificaci\xF3n",align:"left",field:"identificacion"},{name:"edad",label:"Edad",align:"left",field:"edad"},{name:"sexo",label:"Sexo",align:"left",field:"sexo"},{name:"estado_civil",label:"Estado civil",align:"left",field:"estado_civil"},{name:"direccion",label:"Direcci\xF3n",align:"left",field:"direccion"},{name:"telefono",label:"Tel\xE9fono",align:"left",field:"telefono"}]}},mounted(){this.pacientesGet()},methods:{pacienteNew(){this.$router.push({name:"pacienteNew"})},pacientesGet(){this.loading=!0,this.$axios.get("pacientes",{params:{search:this.filter,page:this.current_page}}).then(i=>{this.pacientes=i.data.data,this.total=i.data.total,this.per_page=i.data.per_page,this.current_page=i.data.current_page}).catch(i=>{this.$alert.error(i.response.data.message)}).finally(()=>{this.loading=!1})},gestionGet(){this.loading=!0,this.$axios.get("gestiones").then(i=>{this.gestiones=i.data,this.loading=!1}).catch(i=>{this.$alert.error(i.response.data.message),this.loading=!1})},pacientePost(){this.loading=!0,this.$axios.post("pacientes",this.paciente).then(i=>{this.pacientesGet(),this.pacienteDialog=!1,this.$alert.success("Periodo creado")}).catch(i=>{this.$alert.error(i.response.data.message)}).finally(()=>{this.loading=!1})},pacientePut(){this.loading=!0,this.$axios.put("pacientes/"+this.paciente.id,this.paciente).then(i=>{this.pacientesGet(),this.pacienteDialog=!1,this.$alert.success("Periodo actualizado")}).catch(i=>{this.$alert.error(i.response.data.message)}).finally(()=>{this.loading=!1})},pacienteEditPassword(i){this.paciente={...i},this.$alert.dialogPrompt("Nueva contrase\xF1a","Ingrese la nueva contrase\xF1a","password").onOk(e=>{this.$axios.put("updatePassword/"+i.id,{password:e}).then(m=>{this.pacientesGet(),this.$alert.success("Contrase\xF1a actualizada")}).catch(m=>{this.$alert.error(m.response.data.message)})})},pacienteEdit(i,e){console.log(e),this.$router.push({name:"paciente",params:{id:e.id}})},pacienteDelete(i){this.$alert.dialog("\xBFDesea eliminar el paciente?").onOk(()=>{this.loading=!0,this.$axios.delete("pacientes/"+i).then(e=>{this.pacientesGet(),this.$alert.success("Periodo eliminado")}).catch(e=>{this.$alert.error(e.response.data.message)}).finally(()=>{this.loading=!1})})}}},z={style:{width:"100%"}},R={class:"flex flex-center"},F={class:"text-right"};function O(i,e,m,H,t,n){return d(),p(S,{class:"q-pa-md"},{default:o(()=>[l(E,{rows:t.pacientes,columns:t.columns,dense:"","wrap-cells":"",flat:"",bordered:"","rows-per-page-options":[0],title:"Usuarios",onRowClick:n.pacienteEdit,"hide-bottom":""},{top:o(()=>[s("div",z,[s("div",null,[l(r,{modelValue:t.filter,"onUpdate:modelValue":[e[0]||(e[0]=a=>t.filter=a),n.pacientesGet],label:"Buscar",dense:"",outlined:"",debounce:500,clearable:""},{append:o(()=>[l(f,{name:"search"})]),before:o(()=>[l(c,{color:"positive",label:"Nuevo",onClick:n.pacienteNew,"no-caps":"",icon:"add_circle_outline",loading:t.loading},null,8,["onClick","loading"])]),_:1},8,["modelValue","onUpdate:modelValue"])]),s("div",R,[l(y,{modelValue:t.current_page,"onUpdate:modelValue":[e[1]||(e[1]=a=>t.current_page=a),n.pacientesGet],max:Math.ceil(t.total/t.per_page),"max-pages":5},null,8,["modelValue","max","onUpdate:modelValue"])])])]),"body-cell-actions":o(a=>[l(_,{props:a},{default:o(()=>[l(U,{label:"Opciones","no-caps":"",size:"10px",dense:"",color:"primary"},{default:o(()=>[l(G,null,{default:o(()=>[g((d(),p(V,{clickable:"",onClick:C=>n.pacienteEdit(a.row)},{default:o(()=>[l(u,{avatar:""},{default:o(()=>[l(f,{name:"edit"})]),_:1}),l(u,null,{default:o(()=>[l(Q,null,{default:o(()=>e[11]||(e[11]=[h("Editar")])),_:1})]),_:1})]),_:2},1032,["onClick"])),[[w]]),g((d(),p(V,{clickable:"",onClick:C=>n.pacienteDelete(a.row.id)},{default:o(()=>[l(u,{avatar:""},{default:o(()=>[l(f,{name:"delete"})]),_:1}),l(u,null,{default:o(()=>[l(Q,null,{default:o(()=>e[12]||(e[12]=[h("Eliminar")])),_:1})]),_:1})]),_:2},1032,["onClick"])),[[w]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-tipo_paciente":o(a=>[l(_,{props:a},{default:o(()=>[l(N,{label:a.row.tipo_paciente,color:a.row.tipo_paciente==="Interno"?"indigo":"orange",dense:"",class:"text-white",style:{height:"10px"},size:"10px"},null,8,["label","color"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","onRowClick"]),l(D,{modelValue:t.pacienteDialog,"onUpdate:modelValue":e[10]||(e[10]=a=>t.pacienteDialog=a),persistent:""},{default:o(()=>[l(v,null,{default:o(()=>[l(b,{class:"q-pb-none row items-center"},{default:o(()=>[s("div",null,k(i.actionPeriodo)+" paciente ",1),l(I),l(c,{icon:"close",flat:"",round:"",dense:"",onClick:e[2]||(e[2]=a=>t.pacienteDialog=!1)})]),_:1}),l(b,{class:"q-pt-none"},{default:o(()=>[l(B,{onSubmit:e[9]||(e[9]=a=>t.paciente.id?n.pacientePut():n.pacientePost())},{default:o(()=>[l(r,{modelValue:t.paciente.name,"onUpdate:modelValue":e[3]||(e[3]=a=>t.paciente.name=a),label:"Nombre",dense:"",outlined:"",rules:[a=>!!a||"Campo requerido"]},null,8,["modelValue","rules"]),l(r,{modelValue:t.paciente.pacientename,"onUpdate:modelValue":e[4]||(e[4]=a=>t.paciente.pacientename=a),label:"Usuario",dense:"",outlined:"",rules:[a=>!!a||"Campo requerido"]},null,8,["modelValue","rules"]),l(r,{modelValue:t.paciente.email,"onUpdate:modelValue":e[5]||(e[5]=a=>t.paciente.email=a),label:"Email",dense:"",outlined:"",hint:""},null,8,["modelValue"]),t.paciente.id?P("",!0):(d(),p(r,{key:0,modelValue:t.paciente.password,"onUpdate:modelValue":e[6]||(e[6]=a=>t.paciente.password=a),label:"Contrase\xF1a",dense:"",outlined:"",rules:[a=>!!a||"Campo requerido"]},null,8,["modelValue","rules"])),l(q,{modelValue:t.paciente.role,"onUpdate:modelValue":e[7]||(e[7]=a=>t.paciente.role=a),label:"Rol",dense:"",outlined:"",options:i.roles,rules:[a=>!!a||"Campo requerido"]},null,8,["modelValue","options","rules"]),s("div",F,[l(c,{color:"negative",label:"Cancelar",onClick:e[8]||(e[8]=a=>t.pacienteDialog=!1),"no-caps":"",loading:t.loading},null,8,["loading"]),l(c,{color:"primary",label:"Guardar",type:"submit","no-caps":"",loading:t.loading,class:"q-ml-sm"},null,8,["loading"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var ne=x(T,[["render",O]]);export{ne as default};
