import{n as De,r as w,a as t,aQ as Qe,aS as G,o as Ee,k as je,a$ as Ke,g as ce,a8 as Oe,h as f,y as Ge,bl as Ue,c as He,bm as Je,w as We,V as Xe,_ as Ye,B as U,C as Ze,E as V,F as L,aG as ea,G as u,H as _,Q as aa,L as ne,M as ta,O as la,aF as ra,J as oe}from"./index.b06572a0.js";import{T as na}from"./TouchPan.ec450f1b.js";import{b as R}from"./format.2cae61da.js";import{Q as se}from"./QBadge.eab7fb32.js";import{Q as oa}from"./QMarkupTable.8b056a53.js";import{Q as sa}from"./QPage.a459216a.js";import{h as ue}from"./moment.40bc58bf.js";import"./touch.9135741d.js";import"./selection.4897e411.js";const ie="q-slider__marker-labels",ua=l=>({value:l}),ia=({marker:l})=>f("div",{key:l.value,style:l.style,class:l.classes},l.label),de=[34,37,40,33,39,38],ca={...je,...Ke,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:l=>l>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},da=["pan","update:modelValue","change"];function va({updateValue:l,updatePosition:m,getDragging:M,formAttrs:n}){const{props:e,emit:h,slots:i,proxy:{$q:d}}=ce(),$=De(e,d),A=Ue(n),k=w(!1),B=w(!1),p=w(!1),T=w(!1),b=t(()=>e.vertical===!0?"--v":"--h"),z=t(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),C=t(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(d.lang.rtl===!0)),g=t(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),x=t(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),c=t(()=>e.disable!==!0&&e.readonly!==!0&&g.value<x.value),y=t(()=>{if(e.step===0)return r=>r;const a=(String(e.step).trim().split(".")[1]||"").length;return r=>parseFloat(r.toFixed(a))}),q=t(()=>e.step===0?1:e.step),ve=t(()=>c.value===!0?e.tabindex||0:-1),F=t(()=>e.max-e.min),H=t(()=>x.value-g.value),N=t(()=>Q(g.value)),D=t(()=>Q(x.value)),P=t(()=>e.vertical===!0?C.value===!0?"bottom":"top":C.value===!0?"right":"left"),J=t(()=>e.vertical===!0?"height":"width"),me=t(()=>e.vertical===!0?"width":"height"),W=t(()=>e.vertical===!0?"vertical":"horizontal"),fe=t(()=>{const a={role:"slider","aria-valuemin":g.value,"aria-valuemax":x.value,"aria-orientation":W.value,"data-step":e.step};return e.disable===!0?a["aria-disabled"]="true":e.readonly===!0&&(a["aria-readonly"]="true"),a}),be=t(()=>`q-slider q-slider${b.value} q-slider--${k.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(c.value===!0?" q-slider--editable":""))+(p.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+($.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+b.value:""));function I(a){const r="q-slider__"+a;return`${r} ${r}${b.value} ${r}${b.value}${z.value}`}function X(a){const r="q-slider__"+a;return`${r} ${r}${b.value}`}const he=t(()=>{const a=e.selectionColor||e.color;return"q-slider__selection absolute"+(a!==void 0?` text-${a}`:"")}),ke=t(()=>X("markers")+" absolute overflow-hidden"),pe=t(()=>X("track-container")),ge=t(()=>I("pin")),Ce=t(()=>I("label")),xe=t(()=>I("text-container")),ye=t(()=>I("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),Se=t(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),_e=t(()=>{const a={[me.value]:e.trackSize};return e.trackImg!==void 0&&(a.backgroundImage=`url(${e.trackImg}) !important`),a}),Me=t(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),Y=t(()=>{const a=D.value-N.value,r={[P.value]:`${100*N.value}%`,[J.value]:a===0?"2px":`${100*a}%`};return e.innerTrackImg!==void 0&&(r.backgroundImage=`url(${e.innerTrackImg}) !important`),r});function $e(a){const{min:r,max:o,step:s}=e;let v=r+a*(o-r);if(s>0){const S=(v-g.value)%s;v+=(Math.abs(S)>=s/2?(S<0?-1:1)*s:0)-S}return v=y.value(v),R(v,g.value,x.value)}function Q(a){return F.value===0?0:(a-e.min)/F.value}function qe(a,r){const o=Oe(a),s=e.vertical===!0?R((o.top-r.top)/r.height,0,1):R((o.left-r.left)/r.width,0,1);return R(C.value===!0?1-s:s,N.value,D.value)}const Z=t(()=>Qe(e.markers)===!0?e.markers:q.value),ee=t(()=>{const a=[],r=Z.value,o=e.max;let s=e.min;do a.push(s),s+=r;while(s<o);return a.push(o),a}),ae=t(()=>{const a=` ${ie}${b.value}-`;return ie+`${a}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${a}${C.value===!0?"rtl":"ltr"}`}),E=t(()=>e.markerLabels===!1?null:we(e.markerLabels).map((a,r)=>({index:r,value:a.value,label:a.label||a.value,classes:ae.value+(a.classes!==void 0?" "+a.classes:""),style:{...le(a.value),...a.style||{}}}))),te=t(()=>({markerList:E.value,markerMap:Be.value,classes:ae.value,getStyle:le})),Le=t(()=>{const a=H.value===0?"2px":100*Z.value/H.value;return{...Y.value,backgroundSize:e.vertical===!0?`2px ${a}%`:`${a}% 2px`}});function we(a){if(a===!1)return null;if(a===!0)return ee.value.map(ua);if(typeof a=="function")return ee.value.map(o=>{const s=a(o);return G(s)===!0?{...s,value:o}:{value:o,label:s}});const r=({value:o})=>o>=e.min&&o<=e.max;return Array.isArray(a)===!0?a.map(o=>G(o)===!0?o:{value:o}).filter(r):Object.keys(a).map(o=>{const s=a[o],v=Number(o);return G(s)===!0?{...s,value:v}:{value:v,label:s}}).filter(r)}function le(a){return{[P.value]:`${100*(a-e.min)/F.value}%`}}const Be=t(()=>{if(e.markerLabels===!1)return null;const a={};return E.value.forEach(r=>{a[r.value]=r}),a});function Te(){if(i["marker-label-group"]!==void 0)return i["marker-label-group"](te.value);const a=i["marker-label"]||ia;return E.value.map(r=>a({marker:r,...te.value}))}const Ve=t(()=>[[na,Re,void 0,{[W.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Re(a){a.isFinal===!0?(T.value!==void 0&&(m(a.evt),a.touch===!0&&l(!0),T.value=void 0,h("pan","end")),k.value=!1,p.value=!1):a.isFirst===!0?(T.value=M(a.evt),m(a.evt),l(),k.value=!0,h("pan","start")):(m(a.evt),l())}function re(){p.value=!1}function Fe(a){m(a,M(a)),l(),B.value=!0,k.value=!0,document.addEventListener("mouseup",j,!0)}function j(){B.value=!1,k.value=!1,l(!0),re(),document.removeEventListener("mouseup",j,!0)}function Ne(a){m(a,M(a)),l(!0)}function Pe(a){de.includes(a.keyCode)&&l(!0)}function Ie(a){if(e.vertical===!0)return null;const r=d.lang.rtl!==e.reverse?1-a:a;return{transform:`translateX(calc(${2*r-1} * ${e.thumbSize} / 2 + ${50-100*r}%))`}}function Ae(a){const r=t(()=>B.value===!1&&(p.value===a.focusValue||p.value==="both")?" q-slider--focus":""),o=t(()=>`q-slider__thumb q-slider__thumb${b.value} q-slider__thumb${b.value}-${C.value===!0?"rtl":"ltr"} absolute non-selectable`+r.value+(a.thumbColor.value!==void 0?` text-${a.thumbColor.value}`:"")),s=t(()=>({width:e.thumbSize,height:e.thumbSize,[P.value]:`${100*a.ratio.value}%`,zIndex:p.value===a.focusValue?2:void 0})),v=t(()=>a.labelColor.value!==void 0?` text-${a.labelColor.value}`:""),S=t(()=>Ie(a.ratio.value)),K=t(()=>"q-slider__text"+(a.labelTextColor.value!==void 0?` text-${a.labelTextColor.value}`:""));return()=>{const O=[f("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[f("path",{d:e.thumbPath})]),f("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(O.push(f("div",{class:ge.value+" absolute fit no-pointer-events"+v.value},[f("div",{class:Ce.value,style:{minWidth:e.thumbSize}},[f("div",{class:xe.value,style:S.value},[f("span",{class:K.value},a.label.value)])])])),e.name!==void 0&&e.disable!==!0&&A(O,"push")),f("div",{class:o.value,style:s.value,...a.getNodeData()},O)}}function ze(a,r,o,s){const v=[];e.innerTrackColor!=="transparent"&&v.push(f("div",{key:"inner",class:Me.value,style:Y.value})),e.selectionColor!=="transparent"&&v.push(f("div",{key:"selection",class:he.value,style:a.value})),e.markers!==!1&&v.push(f("div",{key:"marker",class:ke.value,style:Le.value})),s(v);const S=[Ge("div",{key:"trackC",class:pe.value,tabindex:r.value,...o.value},[f("div",{class:Se.value,style:_e.value},v)],"slide",c.value,()=>Ve.value)];if(e.markerLabels!==!1){const K=e.switchMarkerLabelsSide===!0?"unshift":"push";S[K](f("div",{key:"markerL",class:ye.value},Te()))}return S}return Ee(()=>{document.removeEventListener("mouseup",j,!0)}),{state:{active:k,focus:p,preventFocus:B,dragging:T,editable:c,classes:be,tabindex:ve,attributes:fe,roundValueFn:y,keyStep:q,trackLen:F,innerMin:g,innerMinRatio:N,innerMax:x,innerMaxRatio:D,positionProp:P,sizeProp:J,isReversed:C},methods:{onActivate:Fe,onMobileClick:Ne,onBlur:re,onKeyup:Pe,getContent:ze,getThumbRenderFn:Ae,convertRatioToModel:$e,convertModelToRatio:Q,getDraggingRatio:qe}}}const ma=()=>({});var fa=He({name:"QSlider",props:{...ca,modelValue:{required:!0,default:null,validator:l=>typeof l=="number"||l===null},labelValue:[String,Number]},emits:da,setup(l,{emit:m}){const{proxy:{$q:M}}=ce(),{state:n,methods:e}=va({updateValue:b,updatePosition:C,getDragging:z,formAttrs:Je(l)}),h=w(null),i=w(0),d=w(0);function $(){d.value=l.modelValue===null?n.innerMin.value:R(l.modelValue,n.innerMin.value,n.innerMax.value)}We(()=>`${l.modelValue}|${n.innerMin.value}|${n.innerMax.value}`,$),$();const A=t(()=>e.convertModelToRatio(d.value)),k=t(()=>n.active.value===!0?i.value:A.value),B=t(()=>{const c={[n.positionProp.value]:`${100*n.innerMinRatio.value}%`,[n.sizeProp.value]:`${100*(k.value-n.innerMinRatio.value)}%`};return l.selectionImg!==void 0&&(c.backgroundImage=`url(${l.selectionImg}) !important`),c}),p=e.getThumbRenderFn({focusValue:!0,getNodeData:ma,ratio:k,label:t(()=>l.labelValue!==void 0?l.labelValue:d.value),thumbColor:t(()=>l.thumbColor||l.color),labelColor:t(()=>l.labelColor),labelTextColor:t(()=>l.labelTextColor)}),T=t(()=>n.editable.value!==!0?{}:M.platform.is.mobile===!0?{onClick:e.onMobileClick}:{onMousedown:e.onActivate,onFocus:g,onBlur:e.onBlur,onKeydown:x,onKeyup:e.onKeyup});function b(c){d.value!==l.modelValue&&m("update:modelValue",d.value),c===!0&&m("change",d.value)}function z(){return h.value.getBoundingClientRect()}function C(c,y=n.dragging.value){const q=e.getDraggingRatio(c,y);d.value=e.convertRatioToModel(q),i.value=l.snap!==!0||l.step===0?q:e.convertModelToRatio(d.value)}function g(){n.focus.value=!0}function x(c){if(!de.includes(c.keyCode))return;Xe(c);const y=([34,33].includes(c.keyCode)?10:1)*n.keyStep.value,q=([34,37,40].includes(c.keyCode)?-1:1)*(n.isReversed.value===!0?-1:1)*(l.vertical===!0?-1:1)*y;d.value=R(n.roundValueFn.value(d.value+q),n.innerMin.value,n.innerMax.value),b()}return()=>{const c=e.getContent(B,n.tabindex,T,y=>{y.push(p())});return f("div",{ref:h,class:n.classes.value+(l.modelValue===null?" q-slider--no-value":""),...n.attributes.value,"aria-valuenow":l.modelValue},c)}}});const ba={name:"ProductosPorVencer",data(){return{dias:30,productos:[],loading:!1}},mounted(){this.consultar()},methods:{consultar(){this.loading=!0,this.$axios.get("/productosPorVencer",{params:{dias:this.dias}}).then(l=>{this.productos=l.data}).catch(()=>{this.$alert.error("Error al consultar productos por vencer")}).finally(()=>{this.loading=!1})},diasRestantesColor(l){const m=ue(),n=ue(l).diff(m,"days"),e=Math.ceil(this.dias/3);return n<=e?{color:"red",dias:n}:n<=e*2?{color:"orange",dias:n}:{color:"green",dias:n}}}},ha={class:"text-h6"},ka={class:"row"},pa={class:"col-12 col-md-10 q-pa-xs"},ga={class:"col-12 col-md-2"};function Ca(l,m,M,n,e,h){return U(),Ze(sa,{class:"q-pa-xs"},{default:V(()=>[L(ra,{flat:"",bordered:""},{default:V(()=>[L(ea,{class:"q-pa-xs"},{default:V(()=>[u("div",ha,"Productos por Vencer en "+_(e.dias)+" d\xEDas",1),u("div",ka,[u("div",pa,[L(fa,{modelValue:e.dias,"onUpdate:modelValue":m[0]||(m[0]=i=>e.dias=i),min:1,max:100,"label-always":"","label-value":`${e.dias} d\xEDas`,color:"primary",class:"q-mt-md",onChange:h.consultar},null,8,["modelValue","label-value","onChange"])]),u("div",ga,[L(aa,{label:"Consultar",color:"green",icon:"search",class:"q-mt-md",onClick:h.consultar,loading:e.loading,"no-caps":""},null,8,["onClick","loading"])])]),L(oa,{dense:"",class:"q-mt-md",flat:"",bordered:""},{default:V(()=>[m[1]||(m[1]=u("thead",null,[u("tr",null,[u("th",null,"#"),u("th",null,"Producto"),u("th",null,"Cantidad"),u("th",null,"Lote"),u("th",null,"Fecha de Vencimiento"),u("th",null,"Estado"),u("th",null,"D\xEDas restantes")])],-1)),u("tbody",null,[(U(!0),ne(la,null,ta(e.productos,(i,d)=>{var $;return U(),ne("tr",{key:i.id},[u("td",null,_(d+1),1),u("td",null,_(($=i.producto)==null?void 0:$.nombre),1),u("td",null,_(i.cantidad),1),u("td",null,_(i.lote),1),u("td",null,_(i.fecha_vencimiento),1),u("td",null,[L(se,{color:i.estado==="Activo"?"green":"red",class:"q-pa-xs"},{default:V(()=>[oe(_(i.estado),1)]),_:2},1032,["color"])]),u("td",null,[L(se,{color:h.diasRestantesColor(i.fecha_vencimiento).color,class:"q-pa-xs"},{default:V(()=>[oe(_(h.diasRestantesColor(i.fecha_vencimiento).dias)+" d\xEDas ",1)]),_:2},1032,["color"])])])}),128))])]),_:1})]),_:1})]),_:1})]),_:1})}var Ba=Ye(ba,[["render",Ca]]);export{Ba as default};
