import{_ as x,O as c,P as V,Q as n,R as l,aH as v,T as a,S as Q,X as m,Y as P,Z as k,aG as b,U as s,V as p}from"./index.fad21252.js";import{Q as y}from"./QPagination.75403a34.js";import{Q as h}from"./QBadge.2d7457f3.js";import{Q as q}from"./QMarkupTable.4b476b73.js";import{Q as B}from"./QPage.8afd760b.js";import{h as g}from"./moment.40bc58bf.js";import"./format.2cae61da.js";const C={name:"ProductosVencidos",data(){return{productos:[],loading:!1,pagina:1,porPagina:10,total:0}},mounted(){this.consultar()},methods:{consultar(){this.loading=!0,this.$axios.get("/productosVencidos",{params:{page:this.pagina,per_page:this.porPagina}}).then(r=>{this.productos=r.data.data,this.total=r.data.total}).catch(()=>{this.$alert.error("Error al consultar productos vencidos")}).finally(()=>{this.loading=!1})},diasVencido(r){const o=g(r),d=g().diff(o,"days");return d<0?0:d}}},E={class:"row q-col-gutter-sm"},N={class:"col-6"},S={class:"col-6 text-right"};function T(r,o,f,d,e,i){return c(),V(B,{class:"q-pa-xs"},{default:n(()=>[l(b,{flat:"",bordered:""},{default:n(()=>[l(v,{class:"q-pa-xs"},{default:n(()=>[o[2]||(o[2]=a("div",{class:"text-h6"},"Productos Vencidos",-1)),a("div",E,[a("div",N,[l(Q,{label:"Actualizar",color:"red",icon:"refresh",onClick:i.consultar,loading:e.loading,"no-caps":""},null,8,["onClick","loading"])]),a("div",S,[l(y,{modelValue:e.pagina,"onUpdate:modelValue":[o[0]||(o[0]=t=>e.pagina=t),i.consultar],max:Math.ceil(e.total/e.porPagina),"max-pages":"6",size:"sm","boundary-numbers":"","direction-links":"",color:"red"},null,8,["modelValue","max","onUpdate:modelValue"])])]),l(q,{dense:"",class:"q-mt-md",flat:"",bordered:""},{default:n(()=>[o[1]||(o[1]=a("thead",null,[a("tr",null,[a("th",null,"#"),a("th",null,"Producto"),a("th",null,"Cantidad"),a("th",null,"Lote"),a("th",null,"Fecha de Vencimiento"),a("th",null,"Estado"),a("th",null,"D\xEDas vencido")])],-1)),a("tbody",null,[(c(!0),m(k,null,P(e.productos,(t,_)=>{var u;return c(),m("tr",{key:t.id},[a("td",null,s((e.pagina-1)*e.porPagina+_+1),1),a("td",null,s((u=t.producto)==null?void 0:u.nombre),1),a("td",null,s(t.cantidad),1),a("td",null,s(t.lote),1),a("td",null,s(t.fecha_vencimiento),1),a("td",null,[l(h,{color:t.estado==="Activo"?"green":"red",class:"q-pa-xs"},{default:n(()=>[p(s(t.estado),1)]),_:2},1032,["color"])]),a("td",null,[l(h,{color:"negative",class:"q-pa-xs"},{default:n(()=>[p(s(i.diasVencido(t.fecha_vencimiento))+" d\xEDas ",1)]),_:2},1024)])])}),128))])]),_:1})]),_:1})]),_:1})]),_:1})}var M=x(C,[["render",T]]);export{M as default};
