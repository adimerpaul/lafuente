import{_ as D,O as u,P as c,Q as i,R as o,S as d,aB as a,U as p,J as m,V as f,aC as P,aD as g,T as h,W as w,aF as C}from"./index.31111e77.js";import{a as b,d as n,e as k,f as v}from"./format.d31db189.js";import{a as _}from"./QBtnGroup.7c5c9f0b.js";import{Q as V,a as y,b as S}from"./QTable.9f7aa3f2.js";import{Q as U}from"./QSpace.9dd36978.js";import{Q as N}from"./QForm.0e6ad86e.js";import{Q as B}from"./QPage.1fc117fb.js";import{C as Q}from"./ClosePopup.f26b17bb.js";import"./moment.40bc58bf.js";import"./QMarkupTable.8f6b2af9.js";import"./QSelect.dd809d48.js";const G={name:"ProductosPage",data(){return{productos:[],producto:{},productoDialog:!1,loading:!1,actionPeriodo:"",gestiones:[],filter:"",roles:["Doctor","Enfermera","Administrativo","Secretaria"],columns:[{name:"actions",label:"Acciones",align:"center"},{name:"nombre",label:"Nombre",align:"left",field:"nombre"},{name:"descripcion",label:"Descripci\xF3n",align:"left",field:"descripcion"},{name:"unidad",label:"Unidad",align:"left",field:"unidad"},{name:"precio",label:"Precio",align:"left",field:"precio"},{name:"stock",label:"Stock",align:"left",field:"stock"},{name:"stock_minimo",label:"Stock m\xEDnimo",align:"left",field:"stock_minimo"},{name:"stock_maximo",label:"Stock m\xE1ximo",align:"left",field:"stock_maximo"}]}},mounted(){this.productosGet()},methods:{productoNew(){this.producto={name:"",email:"",password:"",area_id:1,productoname:"",cargo:"",role:"Area"},this.actionPeriodo="Nuevo",this.productoDialog=!0},productosGet(){this.loading=!0,this.$axios.get("productos").then(r=>{this.productos=r.data.data}).catch(r=>{this.$alert.error(r.response.data.message)}).finally(()=>{this.loading=!1})},gestionGet(){this.loading=!0,this.$axios.get("gestiones").then(r=>{this.gestiones=r.data,this.loading=!1}).catch(r=>{this.$alert.error(r.response.data.message),this.loading=!1})},productoPost(){this.loading=!0,this.$axios.post("productos",this.producto).then(r=>{this.productosGet(),this.productoDialog=!1,this.$alert.success("Periodo creado")}).catch(r=>{this.$alert.error(r.response.data.message)}).finally(()=>{this.loading=!1})},productoPut(){this.loading=!0,this.$axios.put("productos/"+this.producto.id,this.producto).then(r=>{this.productosGet(),this.productoDialog=!1,this.$alert.success("Periodo actualizado")}).catch(r=>{this.$alert.error(r.response.data.message)}).finally(()=>{this.loading=!1})},productoEdit(r){this.producto={...r},this.actionPeriodo="Editar",this.productoDialog=!0},productoDelete(r){this.$alert.dialog("\xBFDesea eliminar el producto?").onOk(()=>{this.loading=!0,this.$axios.delete("productos/"+r).then(e=>{this.productosGet(),this.$alert.success("Periodo eliminado")}).catch(e=>{this.$alert.error(e.response.data.message)}).finally(()=>{this.loading=!1})})}}},E={class:"text-right"};function q(r,e,I,T,t,s){return u(),c(B,{class:"q-pa-md"},{default:i(()=>[o(S,{rows:t.productos,columns:t.columns,dense:"","wrap-cells":"",flat:"",bordered:"","rows-per-page-options":[0],title:"Productos",filter:t.filter},{"top-right":i(()=>[o(d,{color:"primary",label:"Nuevo",onClick:s.productoNew,outline:"","no-caps":"",icon:"add_circle_outline",loading:t.loading},null,8,["onClick","loading"]),o(a,{modelValue:t.filter,"onUpdate:modelValue":e[0]||(e[0]=l=>t.filter=l),label:"Buscar",dense:"",outlined:""},{append:i(()=>[o(p,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-actions":i(l=>[o(V,{props:l},{default:i(()=>[o(y,{label:"Opciones","no-caps":"",size:"10px",dense:"",color:"primary"},{default:i(()=>[o(_,null,{default:i(()=>[m((u(),c(b,{clickable:"",onClick:x=>s.productoEdit(l.row)},{default:i(()=>[o(n,{avatar:""},{default:i(()=>[o(p,{name:"edit"})]),_:1}),o(n,null,{default:i(()=>[o(k,null,{default:i(()=>e[12]||(e[12]=[f("Editar")])),_:1})]),_:1})]),_:2},1032,["onClick"])),[[Q]]),m((u(),c(b,{clickable:"",onClick:x=>s.productoDelete(l.row.id)},{default:i(()=>[o(n,{avatar:""},{default:i(()=>[o(p,{name:"delete"})]),_:1}),o(n,null,{default:i(()=>[o(k,null,{default:i(()=>e[13]||(e[13]=[f("Eliminar")])),_:1})]),_:1})]),_:2},1032,["onClick"])),[[Q]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-role":i(l=>[o(V,{props:l},{default:i(()=>[o(v,{label:l.row.role,color:l.row.color,"text-color":"white",dense:"",size:"14px"},null,8,["label","color"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"]),o(C,{modelValue:t.productoDialog,"onUpdate:modelValue":e[11]||(e[11]=l=>t.productoDialog=l),persistent:""},{default:i(()=>[o(P,{style:{width:"400px",margin:"0 auto"}},{default:i(()=>[o(g,{class:"q-pb-none row items-center"},{default:i(()=>[h("div",null,w(t.actionPeriodo)+" producto ",1),o(U),o(d,{icon:"close",flat:"",round:"",dense:"",onClick:e[1]||(e[1]=l=>t.productoDialog=!1)})]),_:1}),o(g,{class:"q-pt-none"},{default:i(()=>[o(N,{onSubmit:e[10]||(e[10]=l=>t.producto.id?s.productoPut():s.productoPost())},{default:i(()=>[o(a,{modelValue:t.producto.nombre,"onUpdate:modelValue":e[2]||(e[2]=l=>t.producto.nombre=l),label:"Nombre",dense:"",outlined:"",rules:[l=>!!l||"Campo requerido"]},null,8,["modelValue","rules"]),o(a,{modelValue:t.producto.descripcion,"onUpdate:modelValue":e[3]||(e[3]=l=>t.producto.descripcion=l),label:"Descripci\xF3n",dense:"",outlined:"",hint:""},null,8,["modelValue"]),o(a,{modelValue:t.producto.unidad,"onUpdate:modelValue":e[4]||(e[4]=l=>t.producto.unidad=l),label:"Unidad",dense:"",outlined:"",hint:""},null,8,["modelValue"]),o(a,{modelValue:t.producto.precio,"onUpdate:modelValue":e[5]||(e[5]=l=>t.producto.precio=l),label:"Precio",dense:"",outlined:"",hint:"",type:"number",step:"0.01"},null,8,["modelValue"]),o(a,{modelValue:t.producto.stock,"onUpdate:modelValue":e[6]||(e[6]=l=>t.producto.stock=l),label:"Stock",dense:"",outlined:"",hint:""},null,8,["modelValue"]),o(a,{modelValue:t.producto.stock_minimo,"onUpdate:modelValue":e[7]||(e[7]=l=>t.producto.stock_minimo=l),label:"Stock m\xEDnimo",dense:"",outlined:"",hint:""},null,8,["modelValue"]),o(a,{modelValue:t.producto.stock_maximo,"onUpdate:modelValue":e[8]||(e[8]=l=>t.producto.stock_maximo=l),label:"Stock m\xE1ximo",dense:"",outlined:"",hint:""},null,8,["modelValue"]),h("div",E,[o(d,{color:"negative",label:"Cancelar",onClick:e[9]||(e[9]=l=>t.productoDialog=!1),"no-caps":"",loading:t.loading},null,8,["loading"]),o(d,{color:"primary",label:"Guardar",type:"submit","no-caps":"",loading:t.loading,class:"q-ml-sm"},null,8,["loading"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var M=D(G,[["render",q]]);export{M as default};
